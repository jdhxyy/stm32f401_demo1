/*********************************************************************
*						   Flash驱动层头文件
*						(c)copyright 2015,jdh
*						  All Right Reserved
*新建日期:2015/3/17 by jdh
**********************************************************************/

#ifndef _DRV_FLASH_H_
#define _DRV_FLASH_H_

/*********************************************************************
*							头文件
**********************************************************************/

#include "def.h"

/*********************************************************************
*							宏定义
**********************************************************************/

/*********************************************************************
*							FLASH扇区地址
**********************************************************************/	

#ifndef ADDR_FLASH
#define ADDR_FLASH

//扇区0,16K
#define ADDR_FLASH_SECTOR_0     ((uint32_t)0x08000000)
//扇区1,16K
#define ADDR_FLASH_SECTOR_1     ((uint32_t)0x08004000)
//扇区2,16K
#define ADDR_FLASH_SECTOR_2     ((uint32_t)0x08008000)
//扇区3,16K
#define ADDR_FLASH_SECTOR_3     ((uint32_t)0x0800C000)
//扇区4,64K
#define ADDR_FLASH_SECTOR_4     ((uint32_t)0x08010000)
//扇区5,128K
#define ADDR_FLASH_SECTOR_5     ((uint32_t)0x08020000)
//扇区6,128K
#define ADDR_FLASH_SECTOR_6     ((uint32_t)0x08040000)
//扇区7,128K
#define ADDR_FLASH_SECTOR_7     ((uint32_t)0x08060000)
//扇区8,128K
#define ADDR_FLASH_SECTOR_8     ((uint32_t)0x08080000)
//扇区9,128K
#define ADDR_FLASH_SECTOR_9     ((uint32_t)0x080A0000) 
//扇区10,128K
#define ADDR_FLASH_SECTOR_10    ((uint32_t)0x080C0000)
//扇区11,128K
#define ADDR_FLASH_SECTOR_11    ((uint32_t)0x080E0000)

#endif

/*********************************************************************
*							函数
**********************************************************************/
 
/*********************************************************************
*							初始化flash
**********************************************************************/

void drv_flash_init(void);

/*********************************************************************
*							擦除flash
*说明:擦除以扇区为单位
*参数:addr:写入地址
*     size:擦除的地址块大小,单位字节
*返回:成功返回1,失败返回0
**********************************************************************/

void drv_flash_erase(uint32_t addr,uint32_t size);

/*********************************************************************
*							写入字节
*参数:addr:写入地址
*     data:写入的数据
**********************************************************************/

void drv_flash_write_byte(uint32_t addr,uint8_t data);

/*********************************************************************
*							读取字节
*参数:addr:写入地址
*返回:数据
**********************************************************************/

uint8_t drv_flash_read_byte(uint32_t addr);

/*********************************************************************
*							写入半字长数据
*参数:addr:写入地址
*     data:写入的数据
**********************************************************************/

void drv_flash_write_half_word(uint32_t addr,uint16_t data);

/*********************************************************************
*							读取半字长数据
*参数:addr:写入地址
*返回:数据
**********************************************************************/

uint16_t drv_flash_read_half_word(uint32_t addr);

/*********************************************************************
*							写入字长数据
*参数:addr:写入地址
*     data:写入的数据
**********************************************************************/

void drv_flash_write_word(uint32_t addr,uint32_t data);

/*********************************************************************
*							读取字长数据
*参数:addr:写入地址
*返回:数据
**********************************************************************/

uint32_t drv_flash_read_word(uint32_t addr);

/*********************************************************************
*							写入数据
*参数:addr:写入地址
*     data:写入的数据
*     len:数据长度
**********************************************************************/

void drv_flash_write(uint32_t addr,uint8_t *data,uint16_t len);

/*********************************************************************
*							读取数据
*参数:addr:待读取的地址
*     data:读取数据缓存
*     len:读取数据长度
**********************************************************************/

void drv_flash_read(uint32_t addr,uint8_t *data,uint16_t len);

#endif


